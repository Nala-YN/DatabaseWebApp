{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-1c885bc2\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"发布您的出售信息\", -1 /* HOISTED */));\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"el-icon-plus\"\n}, null, -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_input_number = _resolveComponent(\"el-input-number\");\n  const _component_el_upload = _resolveComponent(\"el-upload\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createVNode(_component_el_form, {\n    class: \"form\",\n    ref: \"form\",\n    model: _ctx.form,\n    \"label-width\": \"100px\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form_item, {\n      label: \"书籍名称\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $data.name,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.name = $event),\n        placeholder: \"请输入书籍名称\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"书籍介绍\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        type: \"textarea\",\n        modelValue: $data.intro,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.intro = $event),\n        placeholder: \"请输入书籍介绍：如作者、出版社、新旧程度等\",\n        autosize: {\n          minRows: 5,\n          maxRows: 10\n        }\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"书籍价格\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input_number, {\n        modelValue: $data.price,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.price = $event),\n        min: 0,\n        step: 1,\n        \"controls-position\": \"right\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"书籍封面图片\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_upload, {\n        \"list-type\": \"picture-card\",\n        \"on-remove\": $options.handleRemove,\n        \"on-exceed\": $options.handleExceed,\n        \"file-list\": $data.fileList,\n        \"http-request\": $options.uploadFile,\n        \"before-upload\": $options.handleUpload,\n        limit: 1\n      }, {\n        default: _withCtx(() => [_hoisted_3]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"on-remove\", \"on-exceed\", \"file-list\", \"http-request\", \"before-upload\"]), _createCommentVNode(\" <el-image style=\\\"width: 100px; height: 100px\\\" :src=\\\"url\\\" /> \")]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, null, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: _cache[3] || (_cache[3] = $event => $options.submitForm('form'))\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"发布\")]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_button, {\n        onClick: _cache[4] || (_cache[4] = $event => $options.resetForm('form'))\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"重置\")]),\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"model\"])]);\n}","map":{"version":3,"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_createVNode","_component_el_form","ref","model","_ctx","form","_component_el_form_item","label","_component_el_input","$data","name","$event","placeholder","type","intro","autosize","minRows","maxRows","_component_el_input_number","price","min","step","_component_el_upload","$options","handleRemove","handleExceed","fileList","uploadFile","handleUpload","limit","_hoisted_3","_createCommentVNode","_component_el_button","onClick","_cache","submitForm","resetForm"],"sources":["C:\\Users\\faq\\Desktop\\DatabaseWebApp\\client\\src\\components\\AddSelling.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <h1>发布您的出售信息</h1>\r\n    <el-form class=\"form\" ref=\"form\" :model=\"form\" label-width=\"100px\">\r\n      <el-form-item label=\"书籍名称\">\r\n        <el-input v-model=\"name\" placeholder=\"请输入书籍名称\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"书籍介绍\">\r\n        <el-input\r\n          type=\"textarea\"\r\n          v-model=\"intro\"\r\n          placeholder=\"请输入书籍介绍：如作者、出版社、新旧程度等\"\r\n          :autosize=\"{ minRows: 5, maxRows: 10 }\"\r\n        ></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"书籍价格\">\r\n        <el-input-number v-model=\"price\" :min=\"0\" :step=\"1\" controls-position=\"right\"></el-input-number>\r\n      </el-form-item>\r\n      <el-form-item label=\"书籍封面图片\">\r\n        <el-upload\r\n          list-type=\"picture-card\"\r\n          :on-remove=\"handleRemove\"\r\n          :on-exceed=\"handleExceed\"\r\n          :file-list=\"fileList\"\r\n          :http-request=\"uploadFile\"\r\n          :before-upload=\"handleUpload\"\r\n          :limit=\"1\"\r\n        >\r\n          <i class=\"el-icon-plus\"></i>\r\n        </el-upload>\r\n        <!-- <el-image style=\"width: 100px; height: 100px\" :src=\"url\" /> -->\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"submitForm('form')\">发布</el-button>\r\n        <el-button @click=\"resetForm('form')\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport { ElMessage } from 'element-plus'; \r\nexport default {\r\n  data() {\r\n    return {\r\n      name: \"\",\r\n      intro: \"\",\r\n      price: 0,\r\n      dialogImageUrl: \"\",\r\n      dialogVisible: false,\r\n      base64:\"\",\r\n      fileList:[],\r\n      url:\"\"\r\n    };\r\n  },\r\n  methods: {\r\n    submitForm() {\r\n      // 这里是你的发布逻辑，可以发送请求到后端或者其他操作\r\n      //console.log(this.fileList)\r\n      axios.post('http://127.0.0.1:8000/api/upload',\r\n      {\r\n        image:this.base64\r\n      }).then(response=>{\r\n        console.log(response);\r\n        this.url=response.data.image_data;\r\n      }).catch(error=>{\r\n        ElMessage({message:error,type:\"error\"})\r\n      })\r\n      this.resetForm();\r\n    },\r\n    resetForm() {\r\n      this.name=\"\";\r\n      this.intro=\"\";\r\n      this.price=\"\";\r\n      this.fileList=[];\r\n    },\r\n    uploadFile(file) {\r\n      console.log(file);\r\n      // 这里是你的上传前的验证逻辑，可以检查文件类型和大小等\r\n      const reader=new FileReader();\r\n      reader.readAsDataURL(file.file);\r\n      reader.onload=()=>{\r\n        this.base64=reader.result;\r\n      }\r\n    },\r\n    handleUpload(file){\r\n      \r\n    },\r\n    handleRemove(file, fileList) {\r\n      console.log(file, fileList);\r\n    },\r\n    handleExceed(){\r\n      ElMessage({message:\"只允许上传一张图片\",type:\"error\"})\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  height: 80vh;\r\n}\r\n\r\nh1 {\r\n  font-size: 24px;\r\n}\r\n\r\n.form {\r\n  width: 75%;\r\n}\r\n</style>\r\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAW;gEACpBC,mBAAA,CAAiB,YAAb,UAAQ;gEA0BNA,mBAAA,CAA4B;EAAzBD,KAAK,EAAC;AAAc;;;;;;;;;uBA3B/BE,mBAAA,CAoCM,OApCNC,UAoCM,GAnCJC,UAAiB,EACjBC,YAAA,CAiCUC,kBAAA;IAjCDN,KAAK,EAAC,MAAM;IAACO,GAAG,EAAC,MAAM;IAAEC,KAAK,EAAEC,IAAA,CAAAC,IAAI;IAAE,aAAW,EAAC;;sBACzD,MAEe,CAFfL,YAAA,CAEeM,uBAAA;MAFDC,KAAK,EAAC;IAAM;wBACxB,MAA0D,CAA1DP,YAAA,CAA0DQ,mBAAA;oBAAvCC,KAAA,CAAAC,IAAI;mEAAJD,KAAA,CAAAC,IAAI,GAAAC,MAAA;QAAEC,WAAW,EAAC;;;QAEvCZ,YAAA,CAOeM,uBAAA;MAPDC,KAAK,EAAC;IAAM;wBACxB,MAKY,CALZP,YAAA,CAKYQ,mBAAA;QAJVK,IAAI,EAAC,UAAU;oBACNJ,KAAA,CAAAK,KAAK;mEAALL,KAAA,CAAAK,KAAK,GAAAH,MAAA;QACdC,WAAW,EAAC,uBAAuB;QAClCG,QAAQ,EAAE;UAAAC,OAAA;UAAAC,OAAA;QAAA;;;QAGfjB,YAAA,CAEeM,uBAAA;MAFDC,KAAK,EAAC;IAAM;wBACxB,MAAgG,CAAhGP,YAAA,CAAgGkB,0BAAA;oBAAtET,KAAA,CAAAU,KAAK;mEAALV,KAAA,CAAAU,KAAK,GAAAR,MAAA;QAAGS,GAAG,EAAE,CAAC;QAAGC,IAAI,EAAE,CAAC;QAAE,mBAAiB,EAAC;;;QAExErB,YAAA,CAaeM,uBAAA;MAbDC,KAAK,EAAC;IAAQ;wBAC1B,MAUY,CAVZP,YAAA,CAUYsB,oBAAA;QATV,WAAS,EAAC,cAAc;QACvB,WAAS,EAAEC,QAAA,CAAAC,YAAY;QACvB,WAAS,EAAED,QAAA,CAAAE,YAAY;QACvB,WAAS,EAAEhB,KAAA,CAAAiB,QAAQ;QACnB,cAAY,EAAEH,QAAA,CAAAI,UAAU;QACxB,eAAa,EAAEJ,QAAA,CAAAK,YAAY;QAC3BC,KAAK,EAAE;;0BAER,MAA4B,CAA5BC,UAA4B,C;;mGAE9BC,mBAAA,qEAAoE,C;;QAEtE/B,YAAA,CAGeM,uBAAA;wBAFb,MAAoE,CAApEN,YAAA,CAAoEgC,oBAAA;QAAzDnB,IAAI,EAAC,SAAS;QAAEoB,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAvB,MAAA,IAAEY,QAAA,CAAAY,UAAU;;0BAAU,MAAE,C,iBAAF,IAAE,E;;UACxDnC,YAAA,CAAoDgC,oBAAA;QAAxCC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAvB,MAAA,IAAEY,QAAA,CAAAa,SAAS;;0BAAU,MAAE,C,iBAAF,IAAE,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}